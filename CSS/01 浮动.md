# 浮动 Float

在标准流中，元素在排列的时候有默认开始位置以及他们所占的区域，从上往下，从左往右输出文档内容，块级元素独占一行，行内元素共享一行，**标准流是最基本的布局方式**。但是有很多网页效果，标准流是没办法实现的，因此我们需要一些手段来破坏流，从而实现一些特殊的布局，而float就具备破坏流的特性。

在CSS中块级元素独占一行，如果想让多个块级元素在一行内显示，可以使用浮动。虽然把块级元素转换为行内块元素可以实现在一行显示，但是他们之间会有大的间隙，难以消除。

内联元素虽然不会独占一行，与之前的内容保持显示在一行，但是内联元素之间也容易产生间隙，消除内联元素之间的间隙也可以使用浮动。

当然，浮动的出现并不是专门为了解决元素之间间隙的，浮动设计的初衷是为了实现**图文混排**。随着技术的不断应用，将浮动和div结合实现商品列表并排显示。浮动让块级元素在同一行显示，解决了块级元素不能在同一行显示的问题，慢慢的浮动就被用来做页面布局，这就是三种传统布局（标准流布局、浮动布局、定位布局）中的浮动布局。

> 三种传统布局
> 1、标准流布局
>   写标签默认的布局方式就是标准流布局（标准文档流、标准流、文档流）
>   特点：水平从左往右、垂直从上往下。块级元素独占一行，行内元素共享一行。在垂直方向占用尽可能少的空间。
>
> 2、浮动布局
>    2.1 主要是：让块级元素（容器标签：div、ul、li）在同一行显示
>    2.2 设置浮动附带的效果：消除元素之间的间隙、让行内元素支持宽高
>
> 3、定位布局：
>   主要用于把一个元素放在另一个元素上：
>     标准流布局元素不会重叠，通过定位可以让元素出现重叠的现象。
>     元素重叠的默认情况下：后面的元素会覆盖前面的元素---后来者居上。
>     如果使用了定位，就可通过z-index改变层叠顺序
>   3.1 相对定位：①改变自身的位置；②给子元素的定位提供参考---子绝父相
>   3.2 绝对定位：让一个元素放在另一个元素上面---子绝父相
>   3.3 固定位置：页面滑动的时候，元素固定不动

# 元素怎样浮动

设置了浮动属性的元素会脱离标准流的控制，移动到其父元素中指定的位置的过程，将块级元素放在一行，浮动会脱离标准流，不占位置，会影响标准流。

浮动元素会尽量向左或向右移动，直到它的外边缘碰到包含框（父元素）或另一个浮动框的边框为止。浮动元素只能左右移动而不能上下移动。

如图，左边的三个框是在标准文档流中，由于自身都是块级元素（独占一行)所以是之上而下排列的，当把框 1 向右浮动时，它脱离文档流并且向右移动，直到它的右边缘碰到包含框的右边缘；这边由于浮动元素不占用页面空间，所以框2、3往上移动。

![image-20211218154154376](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211218154154376.png)

再请看下图，当框 1 向左浮动时，它脱离文档流并且向左移动，直到它的左边缘碰到包含框的左边缘。因为它不再处于文档流中，所以它不占据空间，实际上覆盖住了框 2，使框 2 从视图中消失。

如果把所有三个框都向左移动，那么框 1 向左浮动直到碰到包含框，另外两个框向左浮动直到碰到前一个浮动框。

![image-20211218154241188](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211218154241188.png)

如下图所示，如果包含框太窄，无法容纳水平排列的三个浮动元素，那么其它浮动块向下移动，直到有足够的空间。如果浮动元素的高度不同，那么当它们向下移动时可能被其它浮动元素“卡住”。

![image-20211218154333559](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211218154333559.png)

# 浮动的使用

## 语法

`选择器 { float: 属性值; }`

## 属性值

| 值    | 描述                                                 |
| :---- | :--------------------------------------------------- |
| left  | 元素向左浮动。                                       |
| right | 元素向右浮动。                                       |
| none  | 默认值。元素不浮动，并会显示在其在文本中出现的位置。 |

## 元素浮动的特性

- 浮动的元素脱离了标准文档流，摆脱块级元素和行内元素的限制
  - 浮动的元素摆脱标准文档流的控制，进行漂浮，移动到指定位置，不遵循自上到下的顺序
  - 浮动的元素会具有行内块元素的特性，让行内元素支持设置宽高、块级元素在同一行显示等
  - 浮动的元素会显示在同一行并且元素顶部对齐
- 浮动的元素存在相互贴靠的效果，元素间没有间隙，当父级宽度不够的时候，元素会自动换行
- 浮动的元素虽然脱离了标准**文档流**，不再保留原先的位置，但是没有脱离**文本流**，出现文字环绕的效果
  - 这是浮动最本质的特性，浮动设计的初衷就是破坏文档流，所以设置浮动的元素会脱离文档流
  - 但是浮动的元素不会脱离文本流，元素脱离文档流之后，后面的元素才有机会占据浮动元素的位置，因为元素没有脱离文本流，所以文字不会占据浮动元素的位置，从而实现文字环绕的效果
  - **文本流：**文档的读取和输出顺序，也就是我们通常看到的由左到右、由上而下的读取和输出形式
- 块级元素没有设置宽度，使用默认的auto，宽度和父级一样宽，浮动之后元素会存在收缩的效果
  - 空的块级元素，只设置高度的时候，浮动之后就会失去高度
  - 包含内容的块级元素，添加浮动后，元素的大小根据内容来决定
- 浮动的元素没有margin重叠
- 触发BFC块状格式化上下文

## 浮动的弊端

浮动导致父元素高度塌陷：很多情况下不需要给父元素设置高度，或者不能给父元素设置高度，父元素的高度由子元素决定，当子元素同时设置浮动后，子元素会完全脱离文档流，父元素失去支撑，导致父元素的高度塌陷变为0。

# 清除浮动

当容器的高度为auto，且容器的内容中有浮动（float为left或right）的元素，在这种情况下，容器的高度不能自动伸长以适应内容的高度，使得内容溢出到容器外面而影响（甚至破坏）布局的现象。这个现象叫浮动溢出，为了防止这个现象的出现而进行的CSS处理，就叫CSS清除浮动。

清除浮动之后，父级元素就会根据浮动元素的大小自动撑开高度，父级元素有了高度，就不会影响后面的元素布局。

清除浮动主要就是为了解决父元素因为子级元素浮动引起的内部高度为0的问题。

## 语法

`选择器 {clear: 属性值; } `

## 属性值

| 值    | 描述                                                   |
| :---- | :----------------------------------------------------- |
| left  | 在左侧不允许浮动元素。清除左浮动产生的影响             |
| right | 在右侧不允许浮动元素。清除右浮动产生的影响             |
| both  | 在左右两侧均不允许浮动元素。清除左右两侧浮动产生的影响 |
| none  | 默认值。允许浮动元素出现在两侧。                       |

我们实际工作中， 几乎只用 clear: both; 不用考虑左右的问题，统统清除。

## 清除浮动的方法

### 父级div定义 height 

原理：父级div手动定义height，就解决了父级div无法自动获取到高度的问题，有高度的盒子,才能关住浮动，只要浮动在一个有高度的盒子中，那么这个浮动就不会影响后面的元素，所以就是清除浮动带来的影响了

优点：简单、代码少、容易掌握 

缺点：只适合高度固定的布局，要给出精确的高度，如果高度和父级div不一样时，会产生问题 

建议：不推荐使用，只建议高度固定的布局时使用 

### 结尾处加空div标签 clear:both 

原理：在浮动元素后使用一个空元素如`<div class="clear"></div>`，并在CSS中赋予.clear{clear:both;}属性即可清理浮动，让父级div能自动获取到高度。

优点：简单、代码少、浏览器支持好、不容易出现怪问题 

缺点：如果页面浮动布局多，就要增加很多空div，让人感觉很不好，要求这个空标签必须是块级元素

建议：不推荐使用，但此方法是以前主要使用的一种清除浮动方法 

**clear:both;的原理**：

- clear:both; 的本质就是闭合浮动，就是让父盒子闭合出口和入口，不让子盒子出来，只让浮动在父盒子内部影响，不影响父盒子外面的其他盒子

- clear:both; 清除浮动叫隔墙法，就是在最后一个浮动的元素后面添加一个额外标签，利用这个标签添加清除浮动的样式

### 父级div定义伪元素::after 和 zoom 

原理：IE8以上和非IE浏览器才支持::after，原理和方法2有点类似，zoom(IE转有属性)可解决ie6,ie7浮动问题 

优点：浏览器支持好、不容易出现怪问题（目前：大型网站都有使用，如：百度，网易，新浪等等） 

缺点：代码多、不少初学者不理解原理，要两句代码结合使用才能让主流浏览器都支持。 

建议：推荐使用，建议定义公共类，以减少CSS代码。 

清除浮动代码：

```css
.clearfix::after{
  content:"";
  display:block;
  clear:both;
  visibility:hidden;
  height:0
} 
.clearfix{
  *zoom:1 /*ie6清除浮动的方式 *号只有IE6-IE7执行，其他浏览器不执行*/
} 
```

### 使用before和after双伪元素清除浮动

原理：IE8以上和非IE浏览器才支持::after，原理和方法2有点类似，zoom(IE转有属性)可解决ie6,ie7浮动问题 

优点：浏览器支持好、不容易出现怪问题（目前：大型网站都有使用，如：腾迅，小米等等） 

缺点：代码多、不少初学者不理解原理，要两句代码结合使用才能让主流浏览器都支持。 

建议：推荐使用，建议定义公共类，以减少CSS代码。 

```css
.clearfix::after,
.clearfix::before{
  content: "";
  display: table;
}
.clearfix:after{
  clear: both;
}
.clearfix{
  *zoom: 1;
}
```

### 父级div定义 overflow:hidden 

原理：必须定义width或zoom:1解决IE浮动问题，同时不能定义height，给父元素添加overflow属性，浮动元素又回到了容器层，使父元素可以包含浮动元素，把父元素高度撑起，达到了清理浮动的效果。

优点：简单、代码少、浏览器支持好 

缺点：不能和position配合使用，因为超出的尺寸的会被隐藏。 

建议：只推荐没有使用position或对overflow:hidden理解比较深的朋友使用。

### 父级div定义 overflow:auto 

原理：必须定义width或zoom:1，同时不能定义height，给父元素添加overflow属性，浮动元素又回到了容器层，使父元素可以包含浮动元素，把父元素高度撑起，达到了清理浮动的效果。

优点：简单、代码少、浏览器支持好 

缺点：内部宽高超过父级div时，会出现滚动条。 

建议：不推荐使用，如果你需要出现滚动条或者确保你的代码不会出现滚动条就使用吧。 

### 父级div 也一起浮动

原理：给浮动元素的容器也添加上浮动属性即可清除内部浮动，但是这样会使其整体浮动，影响布局

优点：没有优点 

缺点：会产生新的浮动问题。 

建议：不推荐使用，只作了解。 

### 父级div定义 display:table 

原理：将div属性变成表格 

优点：没有优点 

缺点：会产生新的未知问题。 

建议：不推荐使用，只作了解。

### 结尾处加 br标签 clear:both

原理：父级div定义zoom:1来解决IE浮动问题，结尾处加 `<br class="clear" />`，CSS中赋予 .clear{ clear:both; }

建议：不推荐使用，只作了解。

# 浮动布局

多个块级元素纵向排列找标准流；多个块级元素横向排列找浮动；

为了约束浮动元素的位置，网页布局一般采用：

- 先用标准流的父元素上下排列，之后内部子元素采用浮动左右排列；

- 一个盒子浮动了，他的兄弟元素也浮动；

- 浮动的盒子只会影响浮动盒子后面的标准流，不影响前面的；

## 实现腾讯网科技频道效果

https://new.qq.com/ch/tech/

![image-20211104231416669](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211104231416669.png)

## 实现京东秒杀效果

https://miaosha.jd.com/

![image-20211104231518265](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211104231518265.png)

## 小米商城首页效果

https://www.mi.com/

![image-20211104231556011](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211104231556011.png)

## 实现新闻页面全部效果

https://baijiahao.baidu.com/s?id=1715285146338964623

![image-20211106113508069](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211106113508069.png)
