# 网页布局对标准文档流的影响 

## 三种传统布局方式

CSS 提供了三种传统布局方式：标准流布局，浮动布局，定位布局。

- 标准流布局 ：元素在排列的时候有默认开始位置以及他们所占的区域，从上往下，从左往右输出文档内容，块元素独占一行，行内元素共享一行，标准流是最基本的布局方式。

- 浮动布局：float属性left(左浮动) right(右浮动) none(不浮动) ， 元素会左移或右移，直至碰到容器为止 。
- 定位布局： position属性的定位方式 1.静态定位(static) 2.相对定位(relative) 3.绝对定位(absolute)4.固定位置(fixed)。

在这几种定位机制中，有几种方式是**脱离标准文档流**（简称脱标）的。什么是脱离标准文档流呢？可以这样理解，本来这个标签是属于文档流管理的，那么它应该按照文档流的正常布局方式从左至右从上之下，并且符合标签本身的含义。 

**脱离标准文档流**是指，这个标签脱离了文档流的管理。不受文档流的布局约束了，并且更重要的一点是，这个标签在原文档流中**所占的空间也被清除了**。

脱离标准文档流的元素处于浮动状态（可以理解为漂浮在文档流的上方），当一个元素脱离标准文档流后，依然在文档流中的其他元素将忽略该元素并填补其原先的空间。

## 脱离标准文档流的影响

会打乱元素的排序规则，设置浮动、定位定位后会按照自己设置的属性值来摆放

让各类型元素失去原来各自的特性，变成同一种元素：
- 浮动会让元素变成行内块元素，如：支持所有css样式，子元素和内容能撑开自身 。 但是不会独占一行，不能继承父元素宽高。
- 绝对定位和固定位位置也会让元素变成行内块元素，但是相对定义不会该变元素的显示模式
- 对于父元素来说，脱离了文档流的子元素不能再撑开父元素了，所以会出现高度塌陷的问题。

# 脱离文档流的布局方式

## 浮动 float

当一个元素浮动之后，它会被移出正常的文档流，然后向左或者向右平移，一直平移到碰到了所处的容器的边框，或者碰到了另外一个浮动的元素。

使用float脱离文档流时，其他盒子会无视这个元素（其他盒子会跑到浮动元素的下面），但其他盒子内的文本依然会为这个元素让出位置（其他盒子的文本内容不会跑到浮动元素的下面），环绕在该元素的周围。因为浮动产生的目的最初是为了做文字环绕效果的。

```html
<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <title>Title</title>  
    <style>  
        .first {  
            width: 200px;  
            height: 200px;  
            border: 1px solid red;  
            float: left;  
        }  
        .second {  
            width: 200px;  
            height: 150px;  
            border: 3px solid blue;  
        }  
    </style>  
</head>  
<body>  
    <div class="first">123</div>  
    <div class="second">456</div>  
</body>  
</html>  
```

效果图：

![img](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/1038932-20180625092544677-1385302220.png)

这段代码中把红色的框设置为了左浮，所以红色的框称为了浮动状态（浮动在蓝色框的上面），而蓝色框占用了原来空色框的位置。注意到，蓝色框中的文本依然认为红色框存在，所以为红色框让出了位置。由于div是块状元素，所以456出现在下方。

## 绝对定位 absolute 

完全脱离标准文档流，让浮动失效，相对于第一个position不是static的父级元素定位，当父级元素的position全是static的时候，absolute是相对于html来进行定位的。

##  固定位置 fixed

完全脱离标准文档流，让浮动失效，相对于浏览器窗口进行定位。（相对于浏览器窗口就是相对于html）。

## 相对定位 relative

相对定位是半脱离标准文档流的方法，下面说明一下为什么是半脱离标准文档流。

```html
<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <title>Title</title>  
    <style>  
        .first {  
            width: 200px;  
            height: 100px;  
            border: 3px solid red;  
        }  
        .second {  
            width: 200px;  
            height: 100px;  
            border: 3px solid blue;  
            position: relative;  
            top: 100px;  
        }  
        .third {  
            width: 200px;  
            height: 200px;  
            border: 3px solid green;  
        }  
    </style>  
</head>  
<body>  
    <div class="first">123</div>  
    <div class="second">456</div>  
    <div class="third">789</div>  
</body>  
</html>  
```

效果图：

![img](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/1038932-20180625094004850-699067937.png)

可以看到，蓝色的框是浮动了，但是绿色的框却相对于蓝色的框原先在文档流中的位置进行了定位。这就是所谓的半脱离标准文档流，本体还在文档流中占有位置，但是却可以通过改变位置使其漂浮到其他的地方，其定位方式是相对其原先在文档流中的位置进行定位的。

一般设置relative是为了让absolute有个相对定位的参照。

# HTML的文本流

**文本流：**文档的读取和输出顺序，也就是我们通常看到的由左到右、由上而下的读取和输出形式

# 文档流和文本流的区别

文档流：是相对于 **块级元素** 盒子模型
文本流：是相对于 **文子段落** 讲的

## 浮动的文档流和文本流

浮动会脱离标准文档流而不会脱离文本流，其他盒模型中的文字还是会为其让出位置，文字环绕在其周围

元素浮动之后，会跳出文档流，不占据文档流中的位置，后面元素补充这个位置，也就是说当浮动元素的后面还有元素时，其他元素会无视浮动元素所占据了的位置，直接在浮动元素身下布局。但是文字却会认同浮动元素所占据的区域，围绕浮动元素"空出位置"进行布局，也就是没有跳出文本流，这就是常见的文字环绕图片的实现方式。

```html
<style>
  img {
    height: 100px;
    float: left;
  }
</style>
<body>
  <img src="https://bkimg.cdn.bcebos.com/pic/728da9773912b31b7096bff48418367adbb4e171" alt="">
  <p>浮动会脱离标准文档流而不会脱离文本流，其他盒模型中的文字还是会为其让出位置，文字环绕在其周围</p>
  <p>元素浮动之后，会跳出文档流，不占据文档流中的位置，后面元素补充这个位置，也就是说当浮动元素的后面还有元素时，其他元素会无视浮动元素所占据了的位置，直接在浮动元素身下布局。</p>
  <p>但是文字却会认同浮动元素所占据的区域，围绕浮动元素"空出位置"进行布局，也就是没有跳出文本流，这就是常见的文字环绕图片的实现方式</p>
</body>
```

![image-20211028234425988](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211028234425988.png)

图片 float: left ，脱离了文档流。

然后前两行 P 元素的盒子模型，就无视了图片的区域，直接进行布局。所以看上去三行文字是环绕图片的，但其盒模型，是无视了图片的---p标签的盒子跑到了图片的下面。

而图片没有脱离文本流，所以 P 元素中的文字排版时，会避开图片区域，于是形成了环绕效果---p标签的文字没有跑到图片的下面。

## 绝对定位/固定位置的文档流和文本流

但是绝对定位后，不仅元素盒子会脱离标准文档流，文字也脱离文本流。那么后面盒子元素的文本就不会在认同它的区域位置，会直接在它后面布局，不会再环绕。

